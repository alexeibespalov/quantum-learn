# QuantumLearn MVP: AI-Native Technical Design

**Version**: 2.0 (AI-Native Pivot)
**Target Audience**: Year 9 UK student (ages 13-14)
**Tech Stack**: Next.js 15, React 18, Firebase, **Genkit (Core Engine)**, **Nano Banana (Visuals)**, **Veo (Video)**

---

## Executive Summary

QuantumLearn v2 is an **AI-Native tutoring platform**. Unlike traditional e-learning (static videos + quizzes), QuantumLearn uses **Generative AI** to teach every lesson. The core experience is a **dynamic, Socratic conversation** with an expert AI tutor who can generate diagrams, plot graphs, and explain concepts in infinite ways until the student understands.

### Core Philosophy: "Dynamic > Static"
*   **No Scripted Videos**: Content is taught via conversation.
*   **On-the-Fly Assets**: Diagrams and graphs are generated live to match the student's specific confusion.
*   **Personalized Pacing**: The AI speeds up or slows down based on real-time comprehension.

---

## Architecture: The "Chat-First" Lesson

The fundamental unit of learning is no longer a "Video" or "Text" file; it is a **Conversation Session**.

### 1. The Lesson Player (`/lesson/[lessonId]`)
The interface is a modern, rich-media chat application (similar to ChatGPT or Claude but specialized for education).

**UI Components:**
*   **Tutor Bubble**: The AI's messages. Can contain:
    *   Text (Markdown/LaTeX)
    *   **Dynamic Cards**:
        *   `ImageCard` (Generated by Nano Banana)
        *   `GraphCard` (Interactive Recharts/JSX plot)
        *   `VideoCard` (Veo-generated or curated clips)
        *   `QuizCard` (Interactive widget for quick checks)
*   **Student Input**:
    *   Text area
    *   "I'm stuck" / "Give me a hint" quick actions.
    *   Voice input (future).

**The "Brain" (Genkit Flow):**
*   **Input**: `conversationHistory`, `studentProfile`, `lessonContext` (`TutorConfig`).
*   **Logic**:
    1.  Analyze student response.
    2.  Check `successCriteria` for the lesson.
    3.  Decide next pedagogical step (Explain, Quiz, Visualize, Encouragement).
    4.  **Tool Use**: If a visual is needed, call `generate_image` (Nano Banana) or emit `graph_data`.
*   **Output**: Streamed response + Structured Data (for UI components).

### 2. Dynamic Asset Generation

**Visuals (Nano Banana)**
*   **Usage**: Infographics, Diagrams, Metaphors.
*   **Trigger**: AI detects need for visual aid (e.g., "Student is confused about 'mitochondria structure'").
*   **Action**: AI constructs a prompt -> Nano Banana -> Image URL -> Rendered in Chat.

**Mathematics (JSX Graphing)**
*   **Usage**: Plotting functions, geometry.
*   **Trigger**: Lesson is "Graphing Lines".
*   **Action**: AI sends JSON `{ type: 'plot', function: 'y=2x+1', domain: [-10, 10] }`.
*   **Frontend**: Renders an interactive JS graph.

**Video (Veo)**
*   **Usage**: Complex dynamic processes (Physics simulations).
*   **Trigger**: "Show me how gravity works".
*   **Action**: AI constructs Veo prompt -> Video URL -> Embedded Player.

---

## Updated Route Structure

```
/
├── (app)
│   ├── /dashboard       # AI-curated daily plan
│   ├── /subjects        # Browse Curriculum
│   ├── /chat/[lessonId] # THE CORE EXPERIENCE (Replaces old Lesson Player)
│   ├── /practice        # AI-generated rapid fire questions
│   ├── /profile         # Mastery Map
```

---

## Key User Flows

### 1. Starting a Lesson
1.  User selects "Mathematics > Algebra > Solving Equations".
2.  System loads `tutorConfig` (Persona: "Detective").
3.  **AI (Opening)**: "Hello! I have a mystery number in a box. If I double it and add 5, I get 15. What's in the box?"
4.  **User**: "Is it 5?"
5.  **AI**: "Spot on! You just solved $2x + 5 = 15$. Let's try a harder one..."

### 2. Getting Stuck (Visual Aid)
1.  **User**: "I don't understand what 'gradient' means."
2.  **AI (Internal)**: Trigger `visualize_slope`.
3.  **AI**: "Think of it like a hill. Here is a steep hill (Gradient 3) vs a flat road (Gradient 0)."
4.  **System**: Generates/Renders a Line Graph comparing $y=3x$ and $y=0x$.
5.  **System**: Generates Nano Banana image of a stick figure struggling up a steep hill.

---

## Data Model Changes
*   **Lessons**: Now store `TutorConfig` (System Prompts, Success Criteria) instead of static transcripts.
*   **Progress**: Tracks "Concepts Mastered" (Boolean flags) rather than "Video Timestamp".

## Implementation Priorities
1.  **Genkit Tutor Flow**: The "Brain" that can hold a structured educational conversation.
2.  **Frontend Chat UI**: A polished, responsive interface that supports Rich Media Cards.
3.  **Tool Integrations**: Connecting the Brain to Nano Banana and a Graphing Library.